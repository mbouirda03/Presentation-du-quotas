<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quotas de Disque sous Linux</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .content {
            padding: 40px;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .intro-box {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .intro-box h2 {
            color: #d63031;
            margin-bottom: 15px;
            font-size: 2em;
        }

        .intro-box ul {
            list-style: none;
            padding-left: 0;
        }

        .intro-box li {
            padding: 10px 0 10px 30px;
            position: relative;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .intro-box li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #00b894;
            font-weight: bold;
            font-size: 1.3em;
        }

        .step-container {
            margin-bottom: 40px;
        }

        .step {
            background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #00acc1;
            transition: transform 0.3s ease;
        }

        .step:hover {
            transform: translateX(10px);
        }

        .step h3 {
            color: #00695c;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .step-number {
            display: inline-block;
            background: #00acc1;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            font-weight: bold;
            margin-right: 10px;
        }

        .command-box {
            background: #2d3436;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
            position: relative;
        }

        .command-box:before {
            content: "$ ";
            color: #74b9ff;
            font-weight: bold;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #00b894;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.3s ease;
        }

        .copy-btn:hover {
            background: #00d2a0;
        }

        .info-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .info-box h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .warning-box {
            background: #f8d7da;
            border-left: 5px solid #dc3545;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .warning-box h4 {
            color: #721c24;
            margin-bottom: 10px;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .image-placeholder {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5em;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .image-placeholder:before {
            content: "üñ•Ô∏è";
            font-size: 5em;
            opacity: 0.3;
            position: absolute;
        }

        /* Carte Mentale Styles */
        .mindmap-container {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 40px 0;
            position: relative;
            overflow: hidden;
        }

        .mindmap-title {
            text-align: center;
            color: #2d3436;
            font-size: 2em;
            margin-bottom: 30px;
            font-weight: 700;
        }

        .mindmap-center {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 0 auto 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
            position: relative;
            z-index: 2;
        }

        .mindmap-branch {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            position: relative;
        }

        .mindmap-node {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: calc(25% - 20px);
            min-width: 250px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            position: relative;
        }

        .mindmap-node:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .mindmap-node h4 {
            color: #2d3436;
            margin-bottom: 15px;
            font-size: 1.2em;
            border-bottom: 2px solid #74b9ff;
            padding-bottom: 5px;
        }

        .mindmap-subnode {
            background: #f8f9fa;
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 4px solid #00b894;
            font-size: 0.95em;
        }

        .mindmap-subnode.warning {
            border-left-color: #ff7675;
            background: #ffeaa7;
        }

        .mindmap-subnode.info {
            border-left-color: #74b9ff;
            background: #dfe6e9;
        }

        .mindmap-connection {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, #74b9ff, #a29bfe);
            z-index: 1;
        }

        .details-box {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border-left: 5px solid #0984e3;
        }

        .details-box h3 {
            color: #2d3436;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .details-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .details-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .details-item h4 {
            color: #d63031;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .footer {
            background: #2d3436;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .nav-btn {
                font-size: 0.9em;
                padding: 10px 15px;
            }

            .mindmap-node {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üóÑÔ∏è Quotas de Disque sous Linux</h1>
            <p>Formation BTS - 2√®me Ann√©e - Guide Complet</p>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn active" onclick="showSection('intro')">Introduction</button>
            <button class="nav-btn" onclick="showSection('installation')">Installation</button>
            <button class="nav-btn" onclick="showSection('config')">Configuration</button>
            <button class="nav-btn" onclick="showSection('test')">Tests</button>
            <button class="nav-btn" onclick="showSection('gestion')">Gestion</button>
            <button class="nav-btn" onclick="showSection('mindmap')">Carte Mentale</button>
        </div>

        <div class="content">
            <!-- Introduction Section -->
            <div id="intro" class="section active">
                <div class="intro-box">
                    <h2>üéØ Pourquoi utiliser les quotas de disque ?</h2>
                    <ul>
                        <li>√âviter la saturation rapide de l'espace disque par un utilisateur</li>
                        <li>Contr√¥ler l'utilisation des ressources par utilisateur ou groupe</li>
                        <li>Permettre un suivi pr√©cis de la consommation de stockage</li>
                        <li>Optimiser la gestion du stockage sur les serveurs multi-utilisateurs</li>
                        <li>Pr√©venir les abus d'espace disque dans les environnements partag√©s</li>
                        <li>Faciliter la planification des besoins en stockage</li>
                    </ul>
                </div>

                <div class="details-box">
                    <h3>üìä Avantages d√©taill√©s des quotas</h3>
                    <div class="details-list">
                        <div class="details-item">
                            <h4>üéØ Contr√¥le Pr√©cis</h4>
                            <p>Les quotas permettent de d√©finir des limites sp√©cifiques par utilisateur ou groupe, offrant un contr√¥le granulaire sur l'utilisation du stockage.</p>
                        </div>
                        <div class="details-item">
                            <h4>üõ°Ô∏è Pr√©vention des Abus</h4>
                            <p>Emp√™che un utilisateur de monopoliser l'espace disque au d√©triment des autres utilisateurs du syst√®me.</p>
                        </div>
                        <div class="details-item">
                            <h4>üìà Optimisation des Ressources</h4>
                            <p>Permet une meilleure allocation et utilisation des ressources de stockage disponibles.</p>
                        </div>
                        <div class="details-item">
                            <h4>üîç Surveillance Facilit√©e</h4>
                            <p>Offre des outils de monitoring pour suivre en temps r√©el l'utilisation du disque.</p>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <h4>üìå D√©finition Technique</h4>
                    <p>Un quota de disque est une limitation de l'espace de stockage allou√© √† un utilisateur ou √† un groupe d'utilisateurs sur un syst√®me Linux. Il permet √† l'administrateur de contr√¥ler la quantit√© de donn√©es que chaque utilisateur peut stocker sur une partition sp√©cifique. Les quotas fonctionnent au niveau du syst√®me de fichiers et peuvent √™tre d√©finis pour le nombre de blocs (espace disque) et/ou le nombre d'inodes (nombre de fichiers).</p>
                </div>

                <div class="warning-box">
                    <h4>‚ö†Ô∏è Points d'Attention</h4>
                    <p>Les quotas sont appliqu√©s par partition et non par r√©pertoire. Pour qu'un quota soit efficace, l'utilisateur doit stocker ses fichiers sur la partition o√π le quota est activ√©. Les quotas ne fonctionnent que sur les syst√®mes de fichiers qui les supportent (ext3, ext4, xfs, etc.).</p>
                </div>
            </div>

            <!-- Installation Section -->
            <div id="installation" class="section">
                <h2 style="color: #2d3436; margin-bottom: 30px;">üì¶ Installation et Configuration Initiale</h2>

                <div class="info-box">
                    <h4>üìã Pr√©requis</h4>
                    <p>Avant de commencer, assurez-vous d'avoir les privil√®ges root ou sudo. V√©rifiez √©galement que votre syst√®me de fichiers supporte les quotas (ext3, ext4, xfs, etc.).</p>
                </div>

                <div class="step">
                    <h3><span class="step-number">1</span>Installation du paquet quota</h3>
                    <p>Premi√®re √©tape : installer le paquet de gestion des quotas. Ce paquet contient tous les outils n√©cessaires pour g√©rer les quotas sous Linux.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        apt-get install quota
                    </div>
                    <div class="info-box" style="margin-top: 15px;">
                        <h4>üí° Alternative pour d'autres distributions</h4>
                        <p><strong>CentOS/RHEL/Fedora :</strong> <code>yum install quota</code><br>
                        <strong>Arch Linux :</strong> <code>pacman -S quota-tools</code><br>
                        <strong>openSUSE :</strong> <code>zypper install quota</code></p>
                    </div>
                </div>

                <div class="step">
                    <h3><span class="step-number">2</span>Configuration du fichier /etc/fstab</h3>
                    <p>D√©clarer les quotas sur la partition du disque dur. Cette √©tape est cruciale car elle indique au syst√®me d'activer le support des quotas au niveau du syst√®me de fichiers.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        /dev/sda1 / ext3 defaults,usrquota,grpquota 0 0
                    </div>
                    <div class="info-box">
                        <h4>üìù Options importantes :</h4>
                        <p><strong>usrquota</strong> : Active les quotas utilisateurs<br>
                        <strong>grpquota</strong> : Active les quotas de groupes<br>
                        <strong>Options alternatives :</strong> <code>quota</code> (pour les deux types)</p>
                    </div>
                    <div class="warning-box">
                        <h4>‚ö†Ô∏è V√©rification importante</h4>
                        <p>Apr√®s modification de /etc/fstab, v√©rifiez qu'il n'y a pas d'erreur de syntaxe avec : <code>mount -a</code>. Cette commande monte tous les syst√®mes de fichiers list√©s dans fstab sans red√©marrer.</p>
                    </div>
                </div>

                <div class="step">
                    <h3><span class="step-number">3</span>Remontage de la partition</h3>
                    <p>Remonter la partition √† chaud pour prendre en compte les modifications. Cette √©tape applique les nouvelles options sans n√©cessiter un red√©marrage du syst√®me.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        mount -o remount /
                    </div>
                    <div class="info-box" style="margin-top: 15px;">
                        <h4>üí° Alternative plus s√ªre</h4>
                        <p>Pour √©viter tout probl√®me, vous pouvez red√©marrer le syst√®me ou utiliser : <code>systemctl restart local-fs.target</code></p>
                    </div>
                </div>

                <div class="step">
                    <h3><span class="step-number">4</span>Cr√©ation du fichier de d√©finition des quotas</h3>
                    <p>Cr√©er et configurer le fichier aquota.user. Ce fichier contiendra les informations de quotas pour tous les utilisateurs.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        touch /aquota.user
                    </div>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        chown root:root /aquota.user
                    </div>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        chmod 600 /aquota.user
                    </div>
                    <div class="info-box">
                        <h4>üìÅ Fichiers de quotas</h4>
                        <p><strong>aquota.user</strong> : Quotas par utilisateur<br>
                        <strong>aquota.group</strong> : Quotas par groupe<br>
                        Ces fichiers doivent √™tre cr√©√©s √† la racine de chaque partition o√π les quotas sont activ√©s.</p>
                    </div>
                </div>

                <div class="step">
                    <h3><span class="step-number">5</span>Initialisation du syst√®me de quotas</h3>
                    <p>Faire prendre conscience au syst√®me de l'existence du fichier de quotas. Cette commande scanne le syst√®me de fichiers et initialise les fichiers de quotas.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        quotacheck -ugv /dev/sda1
                    </div>
                    <div class="info-box">
                        <h4>üîß Options de quotacheck</h4>
                        <p><strong>-u</strong> : V√©rifie les quotas utilisateurs<br>
                        <strong>-g</strong> : V√©rifie les quotas groupes<br>
                        <strong>-v</strong> : Mode verbeux (affichage d√©taill√©)<br>
                        <strong>-a</strong> : V√©rifie toutes les partitions avec quotas<br>
                        <strong>-m</strong> : Force le scan m√™me si le syst√®me est mont√© en lecture/√©criture</p>
                    </div>
                </div>
            </div>

            <!-- Configuration Section -->
            <div id="config" class="section">
                <h2 style="color: #2d3436; margin-bottom: 30px;">‚öôÔ∏è Configuration des Quotas</h2>

                <div class="warning-box">
                    <h4>‚ö†Ô∏è Important : Unit√©s de mesure</h4>
                    <p>Les valeurs des quotas sont toujours d√©finies en <strong>Ko (Kilooctets)</strong>. N'oubliez pas de convertir les Mo en Ko (√ó 1024). Les quotas peuvent √©galement √™tre d√©finis en nombre d'inodes (nombre de fichiers).</p>
                </div>

                <div class="step">
                    <h3>Concepts cl√©s des quotas</h3>
                    <div class="details-list">
                        <div class="details-item">
                            <h4>Limite Souple (Soft Limit)</h4>
                            <p>L'utilisateur peut temporairement d√©passer cette limite pendant la p√©riode de gr√¢ce (grace period). Apr√®s cette p√©riode, le syst√®me emp√™che la cr√©ation de nouveaux fichiers.</p>
                        </div>
                        <div class="details-item">
                            <h4>Limite Stricte (Hard Limit)</h4>
                            <p>Limite absolue qui ne peut jamais √™tre d√©pass√©e. Le syst√®me bloque imm√©diatement toute tentative de d√©passement.</p>
                        </div>
                        <div class="details-item">
                            <h4>P√©riode de Gr√¢ce (Grace Period)</h4>
                            <p>Dur√©e pendant laquelle l'utilisateur peut d√©passer la limite souple. Par d√©faut 7 jours.</p>
                        </div>
                        <div class="details-item">
                            <h4>Inodes vs Blocs</h4>
                            <p><strong>Blocs :</strong> Limite d'espace disque<br>
                            <strong>Inodes :</strong> Limite du nombre de fichiers</p>
                        </div>
                    </div>
                </div>

                <div class="step">
                    <h3>Configuration pour un utilisateur</h3>
                    <p><strong>Exemple :</strong> D√©finir un quota pour l'utilisateur "sri2" avec les param√®tres suivants :</p>
                    <ul style="margin: 15px 0; padding-left: 20px;">
                        <li>Limite maximale (hard) : 500 Mo (512000 Ko)</li>
                        <li>Limite souple (soft) : 450 Mo (460800 Ko)</li>
                        <li>P√©riode de gr√¢ce : 7 jours (d√©faut)</li>
                    </ul>
                    
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        edquota -u sri2 -f /dev/sda1
                    </div>

                    <div class="info-box">
                        <h4>üí° √âditeur edquota</h4>
                        <p>La commande <code>edquota</code> ouvre un √©diteur (vi/nano) avec un tableau √† remplir :</p>
                        <pre style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 10px;">
Filesystem    blocks    soft    hard    inodes    soft    hard
/dev/sda1     500920    460800  512000  10        0       0</pre>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Syst√®me de fichiers</th>
                                    <th>Blocs utilis√©s</th>
                                    <th>Limite souple (Ko)</th>
                                    <th>Limite stricte (Ko)</th>
                                    <th>Inodes utilis√©s</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>/dev/sda1</td>
                                    <td>500920</td>
                                    <td>460800</td>
                                    <td>512000</td>
                                    <td>10</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="info-box">
                        <h4>üí° Calcul des valeurs :</h4>
                        <p><strong>Limite stricte :</strong> 500 Mo √ó 1024 = 512000 Ko<br>
                        <strong>Limite souple :</strong> 450 Mo √ó 1024 = 460800 Ko<br>
                        <strong>Conversion inverse :</strong> Ko √∑ 1024 = Mo</p>
                    </div>
                </div>

                <div class="step">
                    <h3>Activation des quotas</h3>
                    <p>Activer les quotas sur toutes les partitions apr√®s configuration. Cette commande active les quotas pour tous les utilisateurs et groupes.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        quotaon -aug
                    </div>
                    <div class="info-box" style="margin-top: 15px;">
                        <h4>üîß Options de quotaon</h4>
                        <p><strong>-a</strong> : Active les quotas sur toutes les partitions<br>
                        <strong>-u</strong> : Active les quotas utilisateurs<br>
                        <strong>-g</strong> : Active les quotas groupes<br>
                        <strong>-v</strong> : Mode verbeux</p>
                    </div>
                </div>

                <div class="step">
                    <h3>Configuration pour un groupe</h3>
                    <p>D√©finir un quota pour un groupe d'utilisateurs. Utile pour les d√©partements ou √©quipes partageant un espace de stockage.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        edquota -g Marketing -f /dev/sda1
                    </div>
                    <div class="info-box">
                        <h4>üéØ Utilisation pratique</h4>
                        <p>Les quotas de groupe sont particuli√®rement utiles pour :<br>
                        ‚Ä¢ Limiter l'espace d'un d√©partement<br>
                        ‚Ä¢ Contr√¥ler l'utilisation d'un projet collaboratif<br>
                        ‚Ä¢ G√©rer les ressources d'une √©quipe de d√©veloppement</p>
                    </div>
                </div>
            </div>

            <!-- Test Section -->
            <div id="test" class="section">
                <h2 style="color: #2d3436; margin-bottom: 30px;">üß™ Tests et V√©rifications</h2>

                <div class="step">
                    <h3>Visualiser les quotas actifs</h3>
                    <p>Obtenir un rapport complet des quotas sur une partition sp√©cifique.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        repquota /dev/sda1
                    </div>
                    
                    <div class="info-box">
                        <h4>üìä Interpr√©tation du rapport</h4>
                        <pre style="background: #f8f9fa; padding: 15px; border-radius: 5px; overflow-x: auto;">
*** Rapport pour les quotas user sur le p√©riph√©rique /dev/sda1
P√©riode de sursis bloc : 7days

                Limites bloc          Limites fichier
Utilisateur    utilis√©  souple  stricte  sursis  utilis√©  souple  stricte  sursis
-------------|---------|--------|---------|--------|--------|---------|--------
root          35832    0        0                4        0        0
sri2          502000   460800   512000   6days   10       0        0</pre>
                        <p><strong>Symboles importants :</strong><br>
                        ‚Ä¢ <code>+</code> : D√©passement de la limite souple<br>
                        ‚Ä¢ <code>-</code> : D√©passement de la limite stricte<br>
                        ‚Ä¢ <code>*</code> : D√©passement de la limite inode</p>
                    </div>
                </div>

                <div class="step">
                    <h3>Test 1 : Cr√©er un fichier de 490 Mo</h3>
                    <p>Tester le niveau d'avertissement (limite souple). Ce test v√©rifie que le syst√®me avertit bien l'utilisateur lorsqu'il approche de sa limite.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        dd if=/dev/zero of=/home/sri2/quotatest bs=1024 count=490000
                    </div>
                    
                    <div class="warning-box">
                        <h4>‚ö†Ô∏è Comportement attendu :</h4>
                        <p><code>sda1: warning, user block quota exceeded.</code></p>
                        <p>Le fichier est cr√©√© mais un avertissement est affich√© car le seuil d'alerte (450 Mo) est d√©pass√©. L'utilisateur entre dans la p√©riode de gr√¢ce.</p>
                    </div>
                </div>

                <div class="step">
                    <h3>Test 2 : Cr√©er un fichier de 510 Mo</h3>
                    <p>Tester la limite maximale (limite stricte). Ce test v√©rifie que le syst√®me bloque effectivement le d√©passement de la limite absolue.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        dd if=/dev/zero of=/home/sri2/quotatest bs=1024 count=510000
                    </div>
                    
                    <div class="warning-box">
                        <h4>üö´ Comportement attendu :</h4>
                        <p><code>sda1: write failed, user block limit reached.</code><br>
                        <code>dd: √©criture de '/home/sri2/quotatest': D√©bordement du quota d'espace disque</code></p>
                        <p>Le syst√®me bloque la cr√©ation du fichier au-del√† de 500 Mo. Seuls 500 Mo sont effectivement √©crits.</p>
                    </div>
                </div>

                <div class="step">
                    <h3>V√©rifier la taille du fichier cr√©√©</h3>
                    <p>Confirmer que le fichier a bien √©t√© limit√© √† la taille maximale autoris√©e.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        ls -lh /home/sri2/quotatest
                    </div>
                    <div class="info-box" style="margin-top: 15px;">
                        <h4>üìÅ R√©sultat attendu :</h4>
                        <p><code>-rw-r--r-- 1 sri2 sri2 500M jan 17 15:23 /home/sri2/quotatest</code><br>
                        Le fichier fait exactement 500 Mo, confirmant que le quota a bien fonctionn√©.</p>
                    </div>
                </div>

                <div class="step">
                    <h3>V√©rification en temps r√©el</h3>
                    <p>V√©rifier l'√©tat des quotas pour un utilisateur sp√©cifique.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        quota -u sri2
                    </div>
                    <div class="info-box">
                        <h4>üìà Sortie typique :</h4>
                        <pre style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
Disk quotas for user sri2 (uid 1001):
Filesystem  blocks  quota  limit  grace  files  quota  limit  grace
/dev/sda1   502000  460800 512000  6days     10      0      0</pre>
                    </div>
                </div>
            </div>

            <!-- Gestion Section -->
            <div id="gestion" class="section">
                <h2 style="color: #2d3436; margin-bottom: 30px;">üîß Gestion des Quotas</h2>

                <div class="step">
                    <h3>D√©sactiver les quotas sur une partition sp√©cifique</h3>
                    <p>D√©sactiver temporairement les quotas pour maintenance ou d√©pannage.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        quotaoff -au /dev/sda1
                    </div>
                </div>

                <div class="step">
                    <h3>D√©sactiver les quotas sur toutes les partitions</h3>
                    <p>D√©sactiver compl√®tement le syst√®me de quotas.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        quotaoff -au
                    </div>
                </div>

                <div class="step">
                    <h3>V√©rifier l'√©tat des quotas</h3>
                    <p>V√©rifier les quotas d'un utilisateur sp√©cifique.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        quota -u nom_utilisateur
                    </div>
                </div>

                <div class="step">
                    <h3>Copier les quotas d'un utilisateur √† un autre</h3>
                    <p>Copier la configuration de quotas d'un utilisateur vers un autre. Tr√®s utile pour appliquer les m√™mes limites √† plusieurs utilisateurs.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        edquota -p utilisateur_source utilisateur_destination
                    </div>
                </div>

                <div class="step">
                    <h3>Mettre √† jour les quotas manuellement</h3>
                    <p>Forcer une mise √† jour des fichiers de quotas apr√®s des modifications manuelles.</p>
                    <div class="command-box">
                        <button class="copy-btn" onclick="copyCommand(this)">Copier</button>
                        quotacheck -ugvm
                    </div>
                </div>

                <div class="info-box">
                    <h4>üìã Commandes utiles r√©capitulatives :</h4>
                    <table style="margin-top: 15px;">
                        <thead>
                            <tr>
                                <th>Commande</th>
                                <th>Description</th>
                                <th>Utilisation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>edquota -u user</code></td>
                                <td>√âditer les quotas d'un utilisateur</td>
                                <td>Configuration initiale</td>
                            </tr>
                            <tr>
                                <td><code>edquota -g group</code></td>
                                <td>√âditer les quotas d'un groupe</td>
                                <td>Gestion d'√©quipe</td>
                            </tr>
                            <tr>
                                <td><code>quotaon -aug</code></td>
                                <td>Activer tous les quotas</td>
                                <td>Apr√®s configuration</td>
                            </tr>
                            <tr>
                                <td><code>quotaoff -au</code></td>
                                <td>D√©sactiver tous les quotas</td>
                                <td>Maintenance</td>
                            </tr>
                            <tr>
                                <td><code>repquota /dev/sda1</code></td>
                                <td>Rapport des quotas d'une partition</td>
                                <td>Surveillance</td>
                            </tr>
                            <tr>
                                <td><code>quotacheck -ugv</code></td>
                                <td>V√©rifier et mettre √† jour les quotas</td>
                                <td>Diagnostic</td>
                            </tr>
                            <tr>
                                <td><code>quota -u user</code></td>
                                <td>Afficher les quotas d'un utilisateur</td>
                                <td>V√©rification rapide</td>
                            </tr>
                            <tr>
                                <td><code>edquota -p src dst</code></td>
                                <td>Copier les quotas entre utilisateurs</td>
                                <td>D√©ploiement massif</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="warning-box">
                    <h4>üö® Bonnes pratiques de gestion</h4>
                    <p>1. <strong>Surveillance r√©guli√®re :</strong> Utilisez <code>repquota</code> r√©guli√®rement<br>
                    2. <strong>Journalisation :</strong> Configurez des alertes par email<br>
                    3. <strong>√âtapes graduelles :</strong> Augmentez les quotas progressivement<br>
                    4. <strong>Communication :</strong> Informez les utilisateurs des limites<br>
                    5. <strong>Sauvegarde :</strong> Sauvegardez les fichiers aquota.*</p>
                </div>

                <div class="image-placeholder" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                    <span style="position: relative; z-index: 1;">‚úÖ Gestion Compl√®te des Quotas</span>
                </div>
            </div>

            <!-- Carte Mentale Section -->
            <div id="mindmap" class="section">
                <div class="mindmap-container">
                    <div class="mindmap-title">üß† Carte Mentale : Quotas Linux</div>
                    
                    <div class="mindmap-center">
                        QUOTAS<br>LINUX
                    </div>

                    <div class="mindmap-branch">
                        <!-- Branche 1 -->
                        <div class="mindmap-node">
                            <h4>üéØ Objectifs</h4>
                            <div class="mindmap-subnode">Contr√¥ler l'espace disque</div>
                            <div class="mindmap-subnode">Pr√©venir la saturation</div>
                            <div class="mindmap-subnode">Optimiser les ressources</div>
                            <div class="mindmap-subnode">Surveiller l'utilisation</div>
                            <div class="mindmap-subnode warning">√âviter les abus</div>
                        </div>

                        <!-- Branche 2 -->
                        <div class="mindmap-node">
                            <h4>‚öôÔ∏è Installation</h4>
                            <div class="mindmap-subnode">apt-get install quota</div>
                            <div class="mindmap-subnode">Modifier /etc/fstab</div>
                            <div class="mindmap-subnode info">usrquota, grpquota</div>
                            <div class="mindmap-subnode">mount -o remount /</div>
                            <div class="mindmap-subnode">quotacheck -ugv</div>
                        </div>

                        <!-- Branche 3 -->
                        <div class="mindmap-node">
                            <h4>üîß Configuration</h4>
                            <div class="mindmap-subnode">edquota -u utilisateur</div>
                            <div class="mindmap-subnode info">Limite souple/stricte</div>
                            <div class="mindmap-subnode">Conversion Mo ‚Üí Ko</div>
                            <div class="mindmap-subnode">quotaon -aug</div>
                            <div class="mindmap-subnode warning">Unit√©s en Ko uniquement</div>
                        </div>

                        <!-- Branche 4 -->
                        <div class="mindmap-node">
                            <h4>üìä Surveillance</h4>
                            <div class="mindmap-subnode">repquota /dev/sda1</div>
                            <div class="mindmap-subnode">quota -u utilisateur</div>
                            <div class="mindmap-subnode info">Rapports d√©taill√©s</div>
                            <div class="mindmap-subnode warning">Symboles + et -</div>
                            <div class="mindmap-subnode">P√©riode de gr√¢ce</div>
                        </div>

                        <!-- Branche 5 -->
                        <div class="mindmap-node">
                            <h4>üß™ Tests</h4>
                            <div class="mindmap-subnode warning">dd pour cr√©er fichiers</div>
                            <div class="mindmap-subnode">Test limite souple</div>
                            <div class="mindmap-subnode">Test limite stricte</div>
                            <div class="mindmap-subnode info">ls -lh v√©rification</div>
                            <div class="mindmap-subnode warning">Messages d'erreur</div>
                        </div>

                        <!-- Branche 6 -->
                        <div class="mindmap-node">
                            <h4>üõ†Ô∏è Gestion</h4>
                            <div class="mindmap-subnode">quotaoff d√©sactivation</div>
                            <div class="mindmap-subnode">edquota -p copie</div>
                            <div class="mindmap-subnode info">Maintenance r√©guli√®re</div>
                            <div class="mindmap-subnode warning">Sauvegarde aquota</div>
                            <div class="mindmap-subnode">Alertes et monitoring</div>
                        </div>

                        <!-- Branche 7 -->
                        <div class="mindmap-node">
                            <h4>üìà Types de quotas</h4>
                            <div class="mindmap-subnode info">Par utilisateur</div>
                            <div class="mindmap-subnode info">Par groupe</div>
                            <div class="mindmap-subnode">Quotas blocs (espace)</div>
                            <div class="mindmap-subnode">Quotas inodes (fichiers)</div>
                            <div class="mindmap-subnode warning">Par partition uniquement</div>
                        </div>

                        <!-- Branche 8 -->
                        <div class="mindmap-node">
                            <h4>üö® Erreurs courantes</h4>
                            <div class="mindmap-subnode warning">Oubli remount</div>
                            <div class="mindmap-subnode warning">Mauvaises unit√©s</div>
                            <div class="mindmap-subnode">Fichiers aquota manquants</div>
                            <div class="mindmap-subnode">Permissions incorrectes</div>
                            <div class="mindmap-subnode warning">FS non support√©</div>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <h4>üí° Comment utiliser cette carte mentale</h4>
                    <p>Cette carte mentale r√©sume visuellement tous les aspects importants des quotas Linux. Utilisez-la comme :</p>
                    <ul style="margin: 15px 0; padding-left: 20px;">
                        <li><strong>Guide de r√©vision rapide</strong> avant un examen</li>
                        <li><strong>Checklist</strong> lors de la mise en place des quotas</li>
                        <li><strong>Aide-m√©moire</strong> pour les commandes essentielles</li>
                        <li><strong>Structure d'apprentissage</strong> pour comprendre les concepts</li>
                    </ul>
                    <p>Chaque branche repr√©sente un th√®me important, avec les sous-√©l√©ments cl√©s √† retenir.</p>
                </div>

                <div class="details-box">
                    <h3>üéì Points cl√©s √† retenir</h3>
                    <div class="details-list">
                        <div class="details-item">
                            <h4>1. Installation & Activation</h4>
                            <p>‚úì Installation du paquet quota<br>
                            ‚úì Modification de /etc/fstab avec usrquota/grpquota<br>
                            ‚úì Remontage de la partition<br>
                            ‚úì Initialisation avec quotacheck</p>
                        </div>
                        <div class="details-item">
                            <h4>2. Configuration</h4>
                            <p>‚úì Utilisation de edquota pour modifier les limites<br>
                            ‚úì Toujours sp√©cifier les valeurs en Ko<br>
                            ‚úì Diff√©rence entre limite souple et stricte<br>
                            ‚úì Activation finale avec quotaon</p>
                        </div>
                        <div class="details-item">
                            <h4>3. Surveillance & Tests</h4>
                            <p>‚úì repquota pour les rapports complets<br>
                            ‚úì quota pour v√©rification rapide<br>
                            ‚úì Tests avec dd pour valider les limites<br>
                            ‚úì Interpr√©tation des messages d'erreur</p>
                        </div>
                        <div class="details-item">
                            <h4>4. Bonnes Pratiques</h4>
                            <p>‚úì Surveillance r√©guli√®re<br>
                            ‚úì Communication avec les utilisateurs<br>
                            ‚úì Sauvegarde des fichiers de quotas<br>
                            ‚úì Augmentation progressive des limites</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>üíª Formation BTS 2√®me Ann√©e - Quotas de Disque sous Linux - Guide Complet</p>
            <p style="margin-top: 10px; opacity: 0.8;">Utilisez la carte mentale pour une r√©vision efficace ! üéì</p>
        </div>
    </div>

    <script>
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionId).classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');

            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function copyCommand(button) {
            const commandBox = button.parentElement;
            const commandText = commandBox.textContent.replace('Copier', '').replace('$ ', '').trim();
            
            navigator.clipboard.writeText(commandText).then(() => {
                button.textContent = '‚úì Copi√© !';
                button.style.background = '#00b894';
                
                setTimeout(() => {
                    button.textContent = 'Copier';
                    button.style.background = '#00b894';
                }, 2000);
            });
        }

        // Initialize mindmap connections
        document.addEventListener('DOMContentLoaded', function() {
            // Add connection lines for mindmap
            const mindmapNodes = document.querySelectorAll('.mindmap-node');
            const mindmapCenter = document.querySelector('.mindmap-center');
            
            // This would be enhanced with SVG lines in a production environment
            // For this example, we're using CSS gradients as placeholders
        });
    </script>
</body>
</html>
